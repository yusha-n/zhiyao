<html lang="en">
{% load static %}
<head>

    <title>incubator details</title>

    <script src="/static/js/jquery-3.3.1.js" type="text/javascript"></script>
    <script src="http://cdn.hcharts.cn/highcharts/highcharts.js" type="text/javascript"></script>
    <script src="http://cdn.hcharts.cn/highcharts/exporting.js" type="text/javascript"></script>
    <script src="/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>


    <noscript>
        &lt;link rel="stylesheet" href="/static/css/incubator/noscript.css"/&gt;
    </noscript>
        <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
</head>
<!-- NAVBAR
================================================== -->

<body class="bj">

<script type="text/javascript">
    $(function() {
        var xaixs={{ Mtimes|safe }};
        console.log("测试time");
        {#console.log({{ Mtimes }});#}
        $('#container').highcharts({

    title: {
        text: '温度'
    },
            xAxis:{
        categories: xaixs
            },
    yAxis: {
        title: {
            text: 'temperature'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    series: [{
        name: 'Temp',
        data: {{ Mtemperatures }}
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

});
    });









</script>
<script type="text/javascript">
    $(function() {
        var xaixs={{ Mtimes|safe }};
        console.log("测试time");
        {#console.log({{ Mtimes }});#}
        $('#container2').highcharts({

    title: {
        text: '湿度'
    },
            xAxis:{
        categories: xaixs
            },
    yAxis: {
        title: {
            text: 'humidity'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    series: [{
        name: 'Hum',
        data: {{ Mhumiditys }}
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

});
    });









</script>
<script type="text/javascript">
    $(function() {
        var xaixs={{ Mtimes|safe }};
        console.log("测试time");
        {#console.log({{ Mtimes }});#}
        $('#container3').highcharts({

    title: {
        text: '光照'
    },
            xAxis:{
        categories: xaixs
            },
    yAxis: {
        title: {
            text: 'lightIntensity'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    series: [{
        name: 'light',
        data: {{ MlightIntensitys }}
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

});
    });









</script>
<script type="text/javascript">
    $(function() {
        var xaixs={{ Mtimes|safe }};
        console.log("测试time");
        {#console.log({{ Mtimes }});#}
        $('#container4').highcharts({

    title: {
        text: '压强'
    },
            xAxis:{
        categories: xaixs
            },
    yAxis: {
        title: {
            text: 'pressure'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    series: [{
        name: 'Pressure',
        data: {{ Mpressures }}
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

});
    });









</script>
<div class="col-md-12 title-lead row">
    <ul class="col-md-4">
        <li id="title-logo"><a id="logo" href="/login">智药</a></li>
        <li class="tile-link" style="margin-left: 80px;"><a href="/login">主页</a></li>
        <li class="tile-link"><a>产品</a></li>
        <li class="tile-link"><a href="/showplant">药材</a></li>
    </ul>

    <div class="col-md-4 top-search">
        <input type="text">
        <button class="btn btn-default">搜索</button>
    </div>
    <div class="col-md-1"></div>
    <div class="col-md-3 top-login">


        {% if request.session.is_login %}

        <div class="userimg-sm">
            <a href="/incubator">
                <img src="/static/img/personInfo/{{ request.session.userimg }}">
            </a>
        </div>
        <h3 style="margin-left: 100px">{{ request.session.username }}</h3>
        <button class="btn btn-lg btn-danger" style="margin-top: -60px;margin-left: 100px"
                onclick="window.location='/logout/'">注销
        </button>
        {% endif %}
        {% if not request.session.is_login %}
        <div class="userimg-sm">
            <img src="/static/img/wdl.jpg">
        </div>
        <button class="btn btn-lg btn-info" data-toggle="modal" data-target="#myModal">登录</button>
        {% endif %}

    </div>
</div>
{% if box and env_list %}
<div style="margin-left: 50px;margin-right: 50px;width: auto">
    <div class="col-md-12 box-detail-title">
        <h1 class="col-md-4">培养箱参数</h1>
        <button id="cwtj" class="col-md-offset-3 col-md-2 btn btn-info" style="margin-top: 20px; height: 50px">故障提交
        </button>
        <button class="col-md-offset-1 col-md-2 btn btn-info" style="margin-top: 20px; height: 50px"
                onclick="window.location.href='/oldplantinf'">往期数据详情
        </button>
    </div>
    <div id="box-detail" class="col-md-12">

        <div id="main">
            <div class="col-md-12 container marketing " id="viewChart">

                <!--箱内属性展示  简单表示 -->

                <div class="col-md-6 ">
                    <img style="width:700px;height: 500px" src="{% static 'iotSystem/images/box.jpg' %}"
                         id="incubator_img" onload="refreshImg()">
                    <script>
            function refreshImg(){
                setInterval(a,5000);
            }
            function a(){
                document.getElementById('incubator_img').src="/image"+Math.random();
            }









                    </script>


                </div>
                <h2>药材信息</h2>
                <div style="overflow:auto; height: 180px">
                    <a href="#" class="list-group-item">药材种类：甘草</a>
                    <a href="/test" class="list-group-item">药材生长阶段：开花</a>
                    <a href="#" class="list-group-item">药材状态：健康 <span class="glyphicon glyphicon-info-sign"
                                                                      style="color:red;"></span></a>
                    <a href="/howtoplant" class="list-group-item">药材习性：
                        <div class="planteven">
                            <p>
                                多肉植物喜通风，需要充足的光照，为避免黑腐，宜控水不宜过度浇水。
                            </p>
                        </div>
                    </a>
                </div>


                <h2>箱体环境：</h2>
                <table class="table table-bordered" style="background: white;">
                    {% for dct in env_list.0 %}
                    {% for key,val in dct.items %}
                    <tr>
                        <td> {{ key }} : {{ val }}</td>
                    </tr>
                    {% endfor %}
                    {% empty %}
                    <li> 无记录</li>
                    {% endfor %}
                </table>

                <h2>历史数据</h2>
                <table class="table table-striped" border="5px">
                    <caption>历史记录</caption>
                    <thead>
                    <tr>
                        {% for dct in env_list.0 %}
                            {% for key in dct %}
                                <th> {{ key }} </th>
                            {% endfor %}
                        {% endfor %}


                    </tr>
                    </thead>
                    <tbody>
                    {% for env in env_list %}
                    <tr>
                        {% for dct in env %}
                        {% for val in dct.values %}
                        <td>{{ val }}</td>
                        {% endfor %}
                        {% endfor %}
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>

                <h2>折线图</h2>
                <div id="chart_t" style="height:400px;width:400px;"></div>
                <div id="chart_h" style="height:400px;width:400px;"></div>
                <div id="chart_i" style="height:400px;width:400px;"></div>
                <div id="chart_p" style="height:400px;width:400px;"></div>
                <div id="chart_o" style="height:400px;width:400px;"></div>
                <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
	window.onload = function(){
	$(function()
	{
			var myChart_t = echarts.init(document.getElementById('chart_t'));
			var myChart_h = echarts.init(document.getElementById('chart_h'));
            var myChart_i = echarts.init(document.getElementById('chart_i'));
            var myChart_p = echarts.init(document.getElementById('chart_p'));
            //var myChart_1 = echarts.init(document.getElementById('chart_o'));
            //去掉这行代码以后，绘制出来的图像变成了三角形？？？
            var humi_land_Data = [],temp_land_Data=[],temp_area_Data=[],humi_area_Data=[],pres_Data=[],illu_Data=[];
            var data={{ data_list|safe }};
            for(var i=0;i<data.length;i++)
            {
                humi_land_Data.push({
                    name:data[i].time,
                    value:[data[i].time,data[i].humi_land]
                });
                humi_area_Data.push({
                    name:data[i].time,
                    value:[data[i].time,data[i].humi_area]
                });
                  temp_land_Data.push({
                    name:data[i].time,
                    value:[data[i].time,data[i].temp_land]
                });
                  temp_area_Data.push({
                    name:data[i].time,
                    value:[data[i].time,data[i].temp_area]
                });
                  pres_Data.push({
                    name:data[i].time,
                    value:[data[i].time,data[i].pres]
                });
                  illu_Data.push({
                    name:data[i].time,
                    value:[data[i].time,data[i].illu]
                });
            }
option1 = {
    title: {
        text: '温度'
    },
    tooltip: {
        trigger: 'axis'
    },
    legend: {
        data:['土壤温度','空气温度']
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    toolbox: {
        feature: {
            saveAsImage: {}
        }
    },
    xAxis: {
       type:'time'
    },
    yAxis: {
        type: 'value'
    },
    series: [
        {
            name:'土壤温度',
            type:'line',

            data:temp_land_Data
        },
        {
            name:'空气温度',
            type:'line',

            data:temp_area_Data
        },
    ]
};
option2 = {
    title: {
        text: '湿度'
    },
    tooltip: {
        trigger: 'axis'
    },
    legend: {
        data:['土壤湿度','空气湿度']
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    toolbox: {
        feature: {
            saveAsImage: {}
        }
    },
    xAxis: {
       type:'time'
    },
    yAxis: {
        type: 'value'
    },
    series: [
        {
            name:'土壤湿度',
            type:'line',

            data:humi_land_Data
        },
        {
            name:'空气湿度',
            type:'line',

            data:humi_area_Data
        },
    ]
};
option3 = {
    title: {
        text: '光照'
    },
    tooltip: {
        trigger: 'axis'
    },
    legend: {
        data:['光照']
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    toolbox: {
        feature: {
            saveAsImage: {}
        }
    },
    xAxis: {
       type:'time'
    },
    yAxis: {
        type: 'value'
    },
    series: [
        {
            name:'光照',
            type:'line',

            data:illu_Data
        },
    ]
};
option4 = {
    title: {
        text: '压强'
    },
    tooltip: {
        trigger: 'axis'
    },
    legend: {
        data:['压强']
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    toolbox: {
        feature: {
            saveAsImage: {}
        }
    },
    xAxis: {
       type:'time'
    },
    yAxis: {
        type: 'value'
    },
    series: [
        {
            name:'压强',
            type:'line',

            data:pres_Data
        },
    ]
};
//第一次初始化用
myChart_t.setOption(option1);
myChart_h.setOption(option2);
myChart_i.setOption(option3);
myChart_p.setOption(option4);
var timeFlag="";
                //ajax
                //周期请求数据
        setInterval(function () {
                        //ajax请求数据
                    $.ajax({
                            cache:false,
                            type:"POST",
                            url:"{% url 'iotSystem:ajax_data' %}",
                            async:true,
                            beforeSend:function(xhr, settings){
                                    xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
                                },
                            success:function(data){
                            //???wrdata
                                if(timeFlag==data.time) return;
                                timeFlag=data.time;
                                $("input[name='temp_land']").val(data.temp_land);
                                $("input[name='temp_area']").val(data.temp_area);
                                $("input[name='humi_area']").val(data.humi_area);
                                $("input[name='humi_area']").val(data.humi_area);
                                $("input[name='pres']").val(data.pres);
                                $("input[name='illu']").val(data.illu);

                                temp_land_Data.shift();
                                temp_land_Data.push({
                                    name:data.time,
                                    value:[data.time,data.temp_land]
                                });
                                temp_area_Data.shift();
                                temp_area_Data.push({
                                    name:data.time,
                                    value:[data.time,data.temp_area]
                                });
                                humi_land_Data.shift();
                                humi_land_Data.push({
                                    name:data.time,
                                    value:[data.time,data.humi_land]
                                });
                                humi_area_Data.shift();
                                humi_area_Data.push({
                                    name:data.time,
                                    value:[data.time,data.humi_area]
                                });
                                pres_Data.shift();
                                pres_Data.push({
                                    name:data.time,
                                    value:[data.time,data.pres]
                                });
                                illu_Data.shift();
                                illu_Data.push({
                                    name:data.time,
                                    value:[data.time,data.illu]
                                });
                                myChart_t.setOption({
                                    series: [
                                                                    {
                                                                        name:'土壤温度',
                                                                        type:'line',

                                                                        data:temp_land_Data
                                                                    },
                                                                    {
                                                                        name:'空气温度',
                                                                        type:'line',

                                                                        data:temp_area_Data
                                                                    },
                                    ]
                                });
                                myChart_h.setOption({
                                    series: [
                                                                    {
                                                                        name:'土壤湿度',
                                                                        type:'line',

                                                                        data:humi_land_Data
                                                                    },
                                                                    {
                                                                        name:'空气湿度',
                                                                        type:'line',

                                                                        data:humi_area_Data
                                                                    },
                                    ]
                                });
                                myChart_o.setOption({
                                    series: [
                                                                    {
                                                                        name:'光照',
                                                                        type:'line',

                                                                        data:illu_Data
                                                                    },
                                                                    {
                                                                        name:'压强',
                                                                        type:'line',

                                                                        data:pres_Data
                                                                    },
                                    ]
                                });

                            }//success function
                    });//$.ajax({

        }, 2000);//setinterval
        //first request
                    $.ajax({
                            cache:false,
                            type:"POST",
                            url:"{% url 'iotSystem:ajax_data' %}",
                            async:true,
                            beforeSend:function(xhr, settings){
                                    xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
                                },
                            success:function(data){
                                if(timeFlag==data.time) return;
                                timeFlag=data.time;
                                $("input[name='temp_land']").val(data.temp_land);
                                $("input[name='temp_area']").val(data.temp_area);
                                $("input[name='humi_area']").val(data.humi_area);
                                $("input[name='humi_area']").val(data.humi_area);
                                $("input[name='pres']").val(data.pres);
                                $("input[name='illu']").val(data.illu);

                                temp_land_Data.shift();
                                temp_land_Data.push({
                                    name:data.time,
                                    value:[data.time,data.temp_land]
                                });
                                temp_area_Data.shift();
                                temp_area_Data.push({
                                    name:data.time,
                                    value:[data.time,data.temp_area]
                                });
                                humi_land_Data.shift();
                                humi_land_Data.push({
                                    name:data.time,
                                    value:[data.time,data.humi_land]
                                });
                                humi_area_Data.shift();
                                humi_area_Data.push({
                                    name:data.time,
                                    value:[data.time,data.humi_area]
                                });
                                pres_Data.shift();
                                pres_Data.push({
                                    name:data.time,
                                    value:[data.time,data.pres]
                                });
                                illu_Data.shift();
                                illu_Data.push({
                                    name:data.time,
                                    value:[data.time,data.illu]
                                });
                                myChart_t.setOption({
                                    series: [
                                                                    {
                                                                        name:'土壤温度',
                                                                        type:'line',

                                                                        data:temp_land_Data
                                                                    },
                                                                    {
                                                                        name:'空气温度',
                                                                        type:'line',

                                                                        data:temp_area_Data
                                                                    },
                                    ]
                                });
                                myChart_h.setOption({
                                    series: [
                                                                    {
                                                                        name:'土壤湿度',
                                                                        type:'line',

                                                                        data:humi_land_Data
                                                                    },
                                                                    {
                                                                        name:'空气湿度',
                                                                        type:'line',

                                                                        data:humi_area_Data
                                                                    },
                                    ]
                                });
                                myChart_o.setOption({
                                    series: [
                                                                    {
                                                                        name:'压强',
                                                                        type:'line',

                                                                        data:pres_Data
                                                                    },
                                                                    {
                                                                        name:'光照',
                                                                        type:'line',

                                                                        data:illu_Data
                                                                    },
                                    ]
                                });
                            }//success
                    });//ajax
    });
}







                </script>

                <h2>历史曲线</h2>
                <p> 记录的过滤器，过滤出的数据可视化 </p>
                <h2>控制</h2>

                <form role="form" method="post" action="{% url 'iotSystem:control' box.iden %}">
                    {% csrf_token %}
                    空气温度：<input type="number" name="ta" min="0" max="100" step="1" value="33" />
                    空气湿度：<input type="number" name="ha" min="0" max="100" step="1" value="60" />
                    土壤温度：<input type="number" name="tl" min="0" max="100" step="1" value="5" />
                    土壤湿度：<input type="number" name="hl" min="0" max="100" step="1" value="13" />
                    压强：<input type="number" name="pr" min="101" max="1000" step="0.5" value="101.5" />
                    光照：<input type="number" name="il" min="0" max="10000" step="100" value="3182" />
                    <input type="reset" value="重置">
                    <button type="submit">提交</button>
                </form>






















                <h2 class="col-md-12" style="border-bottom: 5px solid brown;border-radius: 2px">传感器状态</h2>
                <div class="col-md-12 sensor-show">
                    <div class="col-md-7">
                        <div class="col-md-3 sensor-simple-info">
                            <div class="col-md-12 sensor-now">
                                <h5 style="color: brown">温度传感器</h5>
                                <h5>{{ Mtemperatures.0 }} ℃</h5>
                            </div>
                            <div class="col-md-7">
                                <label class="switch">
                                    <input type="checkbox" checked/>
                                    <div class="slider round"></div>
                                </label>
                            </div>

                            <button class="col-md-4 btn btn-default" style="margin-top: 5px" data-toggle="modal"
                                    data-target="#temperatures">详情
                            </button>


                        </div>
                        <div class="col-md-3 sensor-simple-info">
                            <div class="col-md-12 sensor-now">
                                <h5 style="color: brown">湿度传感器</h5>
                                <h5>{{ Mhumiditys.0 }} %</h5>
                            </div>
                            <div class="col-md-7">
                                <label class="switch">
                                    <input type="checkbox" checked/>
                                    <div class="slider round"></div>
                                </label>
                            </div>

                            <button class="col-md-4 btn btn-default" style="margin-top: 5px" data-toggle="modal"
                                    data-target="#humiditys">详情
                            </button>


                        </div>
                        <div class="col-md-3 sensor-simple-info">
                            <div class="col-md-12 sensor-now">
                                <h5 style="color: brown">压强传感器</h5>
                                <h5>{{ Mpressures.0 }}</h5>
                            </div>
                            <div class="col-md-7">
                                <label class="switch">
                                    <input type="checkbox" checked/>
                                    <div class="slider round"></div>
                                </label>
                            </div>

                            <button class="col-md-4 btn btn-default" style="margin-top: 5px" data-toggle="modal"
                                    data-target="#pressures">详情
                            </button>


                        </div>
                        <div class="col-md-3 sensor-simple-info">
                            <div class="col-md-12 sensor-now">
                                <h5 style="color: brown">光照传感器</h5>
                                <h5>{{ MlightIntensitys.0 }} lux</h5>
                            </div>
                            <div class="col-md-7">
                                <label class="switch">
                                    <input type="checkbox" checked/>
                                    <div class="slider round"></div>
                                </label>
                            </div>

                            <button class="col-md-4 btn btn-default" style="margin-top: 5px" data-toggle="modal"
                                    data-target="#lightIntensitys">详情
                            </button>


                        </div>
                        <div class="col-md-3 sensor-simple-info">
                            <div class="col-md-12 sensor-now">
                                <h5>温度传感器</h5>
                                <h5>温度传感器</h5>
                            </div>
                            <div class="col-md-7">
                                <label class="switch">
                                    <input type="checkbox"/>
                                    <div class="slider round"></div>
                                </label>
                            </div>

                            <button class="col-md-4 btn btn-default" style="margin-top: 5px">详情</button>


                        </div>
                        <div class="col-md-3 sensor-simple-info">
                            <div class="col-md-12 sensor-now">
                                <h5>温度传感器</h5>
                                <h5>温度传感器</h5>
                            </div>
                            <div class="col-md-7">
                                <label class="switch">
                                    <input type="checkbox"/>
                                    <div class="slider round"></div>
                                </label>
                            </div>

                            <button class="col-md-4 btn btn-default" style="margin-top: 5px">详情</button>


                        </div>
                        <div class="col-md-3 sensor-simple-info">
                            <div class="col-md-12 sensor-now">
                                <h5>温度传感器</h5>
                                <h5>温度传感器</h5>
                            </div>
                            <div class="col-md-7">
                                <label class="switch">
                                    <input type="checkbox"/>
                                    <div class="slider round"></div>
                                </label>
                            </div>

                            <button class="col-md-4 btn btn-default" style="margin-top: 5px">详情</button>


                        </div>
                        <div class="col-md-3 sensor-simple-info">
                            <div class="col-md-12 sensor-now">
                                <h5>温度传感器</h5>
                                <h5>温度传感器</h5>
                            </div>
                            <div class="col-md-7">
                                <label class="switch">
                                    <input type="checkbox"/>
                                    <div class="slider round"></div>
                                </label>
                            </div>

                            <button class="col-md-4 btn btn-default" style="margin-top: 5px">详情</button>


                        </div>
                        <div class="col-md-3 sensor-simple-info">
                            <div class="col-md-12 sensor-now">
                                <h5>温度传感器</h5>
                                <h5>温度传感器</h5>
                            </div>
                            <div class="col-md-7">
                                <label class="switch">
                                    <input type="checkbox"/>
                                    <div class="slider round"></div>
                                </label>
                            </div>

                            <button class="col-md-4 btn btn-default" style="margin-top: 5px">详情</button>


                        </div>
                    </div>
                    <form>

                        <div class="table-responsive ">
                            <table class="table table-striped table-sm ">
                                <thead>
                                <tr>
                                    <th>硬件名称</th>
                                    <th>工作状态</th>
                                    <th>工作时间</th>
                                    <th>建议工作时间</th>

                                </tr>
                                </thead>
                                <tbody>

                                <tr>
                                    <td>CPU</td>
                                    <td><span class="glyphicon glyphicon-ok-sign"></span></td>
                                    <td>3个月</td>
                                    <td>两年</td>

                                </tr>

                                <tr>
                                    <td>外接显示屏</td>
                                    <td><span class="glyphicon glyphicon-info-sign"></span></td>
                                    <td>3个月</td>
                                    <td>两年</td>

                                </tr>
                                <tr>
                                    <td>湿度传感器</td>
                                    <td><span class="glyphicon glyphicon-remove-sign"></span></td>
                                    <td>3个月</td>
                                    <td>两年</td>

                                </tr>
                                <tr>
                                    <td>压强传感器</td>
                                    <td><span class="glyphicon glyphicon-ok-sign"></span></td>
                                    <td>3个月</td>
                                    <td>两年</td>

                                </tr>
                                <tr>
                                    <td>温度传感器</td>
                                    <td><span class="glyphicon glyphicon-ok-sign"></span></td>
                                    <td>3个月</td>
                                    <td>两年</td>

                                </tr>
                                <tr>
                                    <td>湿度传感器</td>
                                    <td><span class="glyphicon glyphicon-ok-sign"></span></td>
                                    <td>3个月</td>
                                    <td>两年</td>

                                </tr>

                                </tbody>
                            </table>
                        </div>


                    </form>
                </div>
                <div class="col-md-12">
                    <h2 style="border-bottom: 5px solid brown;border-radius: 2px;margin-top: 20px;margin-bottom: 10px">
                        环境自定义 </h2>
                    <form action="/changeEnvironment/{{ request.session.incubatorid }}/" method="post">
                        {% csrf_token %}
                        <div class="table-responsive ">
                            <table class="table table-striped table-sm ">
                                <thead>
                                <tr>
                                    <th>属性</th>
                                    <th>当前值</th>
                                    <th>初始值</th>
                                    <th>建议值</th>
                                    <th>自定义</th>
                                </tr>
                                </thead>
                                <tbody>

                                <tr>
                                    <td>光照强度(lux)</td>
                                    <td>{{ MlightIntensitys.0 }}</td>
                                    <td>{{ IlightIntensity }}</td>
                                    <td>{{ adviceLight }}</td>
                                    <td>
                                        <input name="led_ctl" class="form-control " id="pMedicine "
                                               style="margin-top=align-content: 20px; " type="text ">
                                    </td>
                                </tr>

                                <tr>
                                    <td>温度（℃）</td>
                                    <td>{{ Mtemperatures.0 }}</td>
                                    <td>{{ Itemperature }}</td>
                                    <td>{{ adviceTemperature }}</td>
                                    <td>
                                        <input name="tem_ctl" class="form-control " id="pMedicine "
                                               style="margin-top=align-content: 20px; " type="text ">
                                    </td>
                                </tr>
                                <tr>
                                    <td>湿度（%）</td>
                                    <td>{{ Mhumiditys.0 }}</td>
                                    <td>{{ Ihumidity }}</td>
                                    <td>{{ adviceHumidity }}</td>
                                    <td>
                                        <input name="hum_ctl" class="form-control " id="pMedicine "
                                               style="margin-top=align-content: 20px; " type="text ">
                                    </td>
                                </tr>
                                <tr>
                                    <td>压强（Pa）</td>
                                    <td>{{ Mpressures.0 }}</td>
                                    <td>{{ Ipressure }}</td>
                                    <td>{{ advicepressure }}</td>
                                    <td>
                                        <input name="pre_ctl" class="form-control " id="pMedicine "
                                               style="margin-top=align-content: 20px; " type="text ">
                                    </td>
                                </tr>

                                </tbody>
                            </table>
                        </div>
                        <button class="col-md-offset-4 col-md-4 btn btn-primary btn-lg" type="submit">提交修改</button>

                    </form>

                </div>


            </div>
            <!-- /.row -->
        </div>
        <div class="modal fade" id="temperatures" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">培养箱温度具体变动</h4>
                    </div>
                    <div class="modal-body sensor-detail">
                        <div id="container"></div>
                        <p>当前温度：{{ Mtemperatures.0 }}</p>
                        <p>初始温度：{{ Itemperature }}</p>
                        <p>建议温度：{{ adviceTemperature }}</p>
                    </div>
                    <div class="modal-footer">
                        <table class="table">
                            <caption>详细变动表格</caption>
                            <thead>
                            <tr>
                                <th>时间</th>
                                <th>温度</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>Tanmay</td>
                                <td>Bangalore</td>
                            </tr>
                            <tr>
                                <td>Sachin</td>
                                <td>Mumbai</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>
        <div class="modal fade" id="humiditys" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">培养箱湿度具体变动</h4>
                    </div>
                    <div class="modal-body sensor-detail">
                        <div id="container2"></div>
                        <p>当前湿度：{{ Mhumiditys.0 }}</p>
                        <p>初始湿度：{{ Ihumidity }}</p>
                        <p>建议湿度：{{ adviceHumidity }}</p>
                    </div>
                    <div class="modal-footer">
                        <table class="table">
                            <caption>详细变动表格</caption>
                            <thead>
                            <tr>
                                <th>时间</th>
                                <th>湿度</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>Tanmay</td>
                                <td>Bangalore</td>
                            </tr>
                            <tr>
                                <td>Sachin</td>
                                <td>Mumbai</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>
        <div class="modal fade" id="pressures" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">培养箱压强具体变动</h4>
                    </div>
                    <div class="modal-body sensor-detail">
                        <div id="container4"></div>
                        <p>当前压强：{{ Mpressures.0 }}</p>
                        <p>初始压强：{{ Ipressure }}</p>
                        <p>建议压强：{{ advicepressure }}</p>
                    </div>
                    <div class="modal-footer">
                        <table class="table">
                            <caption>详细变动表格</caption>
                            <thead>
                            <tr>
                                <th>时间</th>
                                <th>压强</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>Tanmay</td>
                                <td>Bangalore</td>
                            </tr>
                            <tr>
                                <td>Sachin</td>
                                <td>Mumbai</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>
        <div class="modal fade" id="lightIntensitys" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">培养箱光照具体变动</h4>
                    </div>
                    <div class="modal-body sensor-detail">
                        <div id="container3"></div>
                        <p>当前光照：{{ MlightIntensitys.0 }}</p>
                        <p>初始光照：{{ IlightIntensity }}</p>
                        <p>建议光照：{{ adviceLight }}</p>
                    </div>
                    <div class="modal-footer">
                        <table class="table">
                            <caption>详细变动表格</caption>
                            <thead>
                            <tr>
                                <th>时间</th>
                                <th>光照</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>Tanmay</td>
                                <td>Bangalore</td>
                            </tr>
                            <tr>
                                <td>Sachin</td>
                                <td>Mumbai</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>
    </div>
</div>
</div>
{% endif %}
{% if not IisSucceed %}
<div class="alert alert-warning">
    <a class="close" href="#" data-dismiss="alert">
        ×
    </a>
    <strong>抱歉</strong>这里出了点问题
</div>
{% endif %}
<div class="col-md-12 page-foot">
    <div class="col-md-12 page-foot-main">
        <p class="col-md-offset-2 col-md-8"> 镜像:日本 教育网 科技网 呼叫热线：4008-100-300 服务邮箱：kf@people.cn 违法和不良信息举报电话：010-65363263
            举报邮箱：jubao@people.cn</p>
        <p class="col-md-offset-2 col-md-8"> 互联网新闻信息服务许可证10120170001 | 增值电信业务经营许可证B1-20060139 </p>
        <p class="col-md-offset-2 col-md-8"> 信息网络传播视听节目许可证0104065 | 广播电视节目制作经营许可证（广媒）字第172号 </p>
        <p class="col-md-offset-2 col-md-8"> 公司地址：花果山福地----水帘洞洞天</p>
    </div>
    <div class="col-md-12 page-foot-bottom">
        <p class="col-md-offset-2 col-md-8">网络文化经营许可证 京网文[2017]9786-1126号 | 网络出版服务许可证（京）字258号 | 京ICP证000006号 |
            京公网安备11000002000008号 </p>
    </div>
</div>


<script>
    // 当网页向下滑动 20px 出现"返回顶部" 按钮
    window.onscroll = function () {
        scrollFunction()
    };

    function scrollFunction() {
        console.log(121);
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("returnTop").style.display = "block";
        } else {
            document.getElementById("returnTop").style.display = "none";
        }
    }

    // 点击按钮，返回顶部
    function topFunction() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
    $("#cwtj").click(function () {
        alert("您的机器故障已提交，请等待维修人员联系！");
        window.location.reload();
    })








</script>


</body>
</html>
